<html
  xmlns:simpleblog="http://typo3.org/ns/ExtbaseBook/Simpleblog/ViewHelpers"
  data-namespace-typo3-fluid="true">

<f:layout name="default" />
<f:section name="content">
<h1><f:translate key="blog.headline.list" /></h1>

<!--
<simpleblog:emailObfuscator email="michael@example.com" />
-->

<!--
<simpleblog:gravatar email="typo3@2019.schams.net" />
-->

<!--
<simpleblog:isFrontend>
  <f:then>
    <p>Frontend!<p>
  </f:then>
  <f:else>
    <p>Backend!<p>
  </f:else>
</simpleblog:isFrontend>
-->

<f:form action="list" additionalAttributes="{role: 'form'}">
    <div class="input-group mb-3">
        <f:form.textfield name="search" value="{search}" class="form-control" />
        <div class="input-group-append">
            <f:form.submit value="{f:translate(key: 'label.search')}" class="btn btn-outline-secondary" />
        </div>
    </div>
</f:form>

<ul class="list-group">
    <simpleblog:widget.filter objects="{blogs}" as="filteredBlogs" property="title">
        <simpleblog:widget.sort objects="{filteredBlogs}" as="sortedBlogs" property="title">
            <f:for each="{sortedBlogs}" as="blog">
                <li class="list-group-item d-flex justify-content-between align-items-center">{blog.title}
                    <div>
                        <f:link.action action="deleteConfirm" arguments="{blog:blog}" class="btn btn-primary btn-sm">
                            <i class="fas fa-trash"></i>
                            <f:translate key="label.delete" />
                        </f:link.action>
                        <f:link.action action="updateForm" arguments="{blog:blog}" class="btn btn-primary btn-sm">
                            <i class="fas fa-edit"></i>
                            <f:translate key="label.edit" />
                        </f:link.action>
                        <f:link.action action="show" arguments="{blog:blog}" class="btn btn-primary btn-sm">
                            <i class="fas fa-eye"></i>
                            <f:translate key="label.show" />
                        </f:link.action>
                    </div>
                </li>
            </f:for>
        </simpleblog:widget.sort>
    </simpleblog:widget.filter>
</ul>
<p><small><f:translate key="blog.list.max-blogs-shown" arguments="{1: settings.blog.max}" /></small></p>
<f:link.action action="addForm" class="btn btn-primary">
    <i class="fas fa-plus-circle"></i>
    <f:translate key="blog.list.button.add-blogs" />
</f:link.action>
</f:section>

</html>
